<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil de Recrutamento - Empregador</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans leading-normal tracking-normal">

    <div id="employerQuestionnaire" class="container mx-auto max-w-2xl mt-10 p-8 bg-white rounded-lg shadow-xl">
        <h1 class="text-3xl font-bold text-blue-600 text-center mb-6">Questionário de Perfil da Empresa</h1>
        <p class="text-gray-700 text-center mb-8">
            Avalie o perfil de candidato ideal para sua empresa, ajustando as barras de acordo com a sua preferência.
            A pontuação mais alta indica maior prioridade.
        </p>

        <form id="employerForm" class="space-y-6">
            
            <div class="p-6 bg-gray-50 rounded-lg shadow-sm">
                <p class="text-lg font-semibold text-gray-800 mb-2">1. Eu busco profissionais proativos e que tomam a iniciativa.</p>
                <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                    <p class="text-sm text-gray-600 flex-shrink-0 mb-2 md:mb-0">Discordo totalmente</p>
                    <input type="range" name="q1" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    <p class="text-sm text-gray-600 flex-shrink-0 mt-2 md:mt-0">Concordo totalmente</p>
                </div>
            </div>

            <div class="p-6 bg-gray-50 rounded-lg shadow-sm">
                <p class="text-lg font-semibold text-gray-800 mb-2">2. Valorizo a criatividade e a capacidade de resolver problemas de forma autônoma.</p>
                <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                    <p class="text-sm text-gray-600 flex-shrink-0 mb-2 md:mb-0">Discordo totalmente</p>
                    <input type="range" name="q2" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    <p class="text-sm text-gray-600 flex-shrink-0 mt-2 md:mt-0">Concordo totalmente</p>
                </div>
            </div>

            <div class="p-6 bg-gray-50 rounded-lg shadow-sm">
                <p class="text-lg font-semibold text-gray-800 mb-2">3. Prefiro colaboradores que se sentem à vontade para assumir riscos calculados.</p>
                <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                    <p class="text-sm text-gray-600 flex-shrink-0 mb-2 md:mb-0">Discordo totalmente</p>
                    <input type="range" name="q3" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    <p class="text-sm text-gray-600 flex-shrink-0 mt-2 md:mt-0">Concordo totalmente</p>
                </div>
            </div>

            <div class="p-6 bg-gray-50 rounded-lg shadow-sm">
                <p class="text-lg font-semibold text-gray-800 mb-2">4. Gosto que os membros da equipe questionem o status quo e busquem novas abordagens.</p>
                <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                    <p class="text-sm text-gray-600 flex-shrink-0 mb-2 md:mb-0">Discordo totalmente</p>
                    <input type="range" name="q4" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    <p class="text-sm text-gray-600 flex-shrink-0 mt-2 md:mt-0">Concordo totalmente</p>
                </div>
            </div>

            <div class="p-6 bg-gray-50 rounded-lg shadow-sm">
                <p class="text-lg font-semibold text-gray-800 mb-2">5. Minha empresa se destaca por ser ágil e adaptável às mudanças do mercado.</p>
                <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                    <p class="text-sm text-gray-600 flex-shrink-0 mb-2 md:mb-0">Discordo totalmente</p>
                    <input type="range" name="q5" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    <p class="text-sm text-gray-600 flex-shrink-0 mt-2 md:mt-0">Concordo totalmente</p>
                </div>
            </div>

            <div class="p-6 bg-gray-50 rounded-lg shadow-sm">
                <p class="text-lg font-semibold text-gray-800 mb-2">6. Eu busco profissionais focados em resultados e que seguem processos de forma eficiente.</p>
                <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                    <p class="text-sm text-gray-600 flex-shrink-0 mb-2 md:mb-0">Discordo totalmente</p>
                    <input type="range" name="q6" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    <p class="text-sm text-gray-600 flex-shrink-0 mt-2 md:mt-0">Concordo totalmente</p>
                </div>
            </div>

            <div class="p-6 bg-gray-50 rounded-lg shadow-sm">
                <p class="text-lg font-semibold text-gray-800 mb-2">7. Valorizo colaboradores que trabalham bem em equipe e com metas claras.</p>
                <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                    <p class="text-sm text-gray-600 flex-shrink-0 mb-2 md:mb-0">Discordo totalmente</p>
                    <input type="range" name="q7" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    <p class="text-sm text-gray-600 flex-shrink-0 mt-2 md:mt-0">Concordo totalmente</p>
                </div>
            </div>

            <div class="p-6 bg-gray-50 rounded-lg shadow-sm">
                <p class="text-lg font-semibold text-gray-800 mb-2">8. Prefiro que as tarefas sejam concluídas no prazo, com atenção aos detalhes.</p>
                <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                    <p class="text-sm text-gray-600 flex-shrink-0 mb-2 md:mb-0">Discordo totalmente</p>
                    <input type="range" name="q8" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    <p class="text-sm text-gray-600 flex-shrink-0 mt-2 md:mt-0">Concordo totalmente</p>
                </div>
            </div>

            <div class="p-6 bg-gray-50 rounded-lg shadow-sm">
                <p class="text-lg font-semibold text-gray-800 mb-2">9. Gosto de ter certeza de que as operações diárias são estáveis e previsíveis.</p>
                <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                    <p class="text-sm text-gray-600 flex-shrink-0 mb-2 md:mb-0">Discordo totalmente</p>
                    <input type="range" name="q9" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    <p class="text-sm text-gray-600 flex-shrink-0 mt-2 md:mt-0">Concordo totalmente</p>
                </div>
            </div>

            <div class="p-6 bg-gray-50 rounded-lg shadow-sm">
                <p class="text-lg font-semibold text-gray-800 mb-2">10. Minha empresa prospera com uma estrutura e planejamento bem definidos.</p>
                <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                    <p class="text-sm text-gray-600 flex-shrink-0 mb-2 md:mb-0">Discordo totalmente</p>
                    <input type="range" name="q10" min="1" max="5" value="3" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    <p class="text-sm text-gray-600 flex-shrink-0 mt-2 md:mt-0">Concordo totalmente</p>
                </div>
            </div>

            <div class="text-center mt-8 space-y-4">
                <button type="button" onclick="submitEmployerResults()" id="submitEmployerButton" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition duration-200">
                    Finalizar Avaliação
                </button>
            </div>
        </form>

        <div id="statusMessage" class="hidden text-center mt-6 p-4 rounded-lg"></div>
        
        <button onclick="window.location.href = 'index.html';" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition duration-200 mt-4">
            Voltar ao Início
        </button>

    </div>

    <script>
        window.submitEmployerResults = async function() {
            const form = document.getElementById('employerForm');
            const submitButton = document.getElementById('submitEmployerButton');
            const statusMessage = document.getElementById('statusMessage');

            submitButton.disabled = true;
            submitButton.classList.remove('bg-blue-600', 'hover:bg-blue-700');
            submitButton.classList.add('bg-gray-400', 'cursor-not-allowed');

            let inovadorScore = 0;
            let executorScore = 0;

            const inovadorQuestions = ['q1', 'q2', 'q3', 'q4', 'q5'];
            const executorQuestions = ['q6', 'q7', 'q8', 'q9', 'q10'];

            inovadorQuestions.forEach(q => {
                const slider = form.querySelector(`input[name="${q}"]`);
                if (slider) inovadorScore += parseInt(slider.value, 10);
            });

            executorQuestions.forEach(q => {
                const slider = form.querySelector(`input[name="${q}"]`);
                if (slider) executorScore += parseInt(slider.value, 10);
            });

            let profile = "", description = "";

            if (inovadorScore > executorScore) {
                profile = "Inovador";
                description = "Sua empresa tem um perfil inovador, buscando soluções criativas e valorizando a autonomia. Você busca colaboradores que sejam agentes de mudança.";
            } else if (executorScore > inovadorScore) {
                profile = "Executor Estratégico";
                description = "Sua empresa tem um perfil executor, com foco na eficiência, colaboração e processos bem definidos. Você busca colaboradores que garantam a execução das tarefas.";
            } else {
                profile = "Equilibrado";
                description = "Sua empresa tem um perfil equilibrado, valorizando tanto a inovação quanto a execução. Você busca colaboradores que se adaptem a ambas as necessidades.";
            }

            try {
                const response = await fetch('/.netlify/functions/saveEmployerProfile', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        profile: profile,
                        description: description,
                        inovadorScore: inovadorScore,
                        executorScore: executorScore
                    })
                });

                if (!response.ok) throw new Error('Erro ao salvar os dados.');

                statusMessage.classList.remove('hidden');
                statusMessage.classList.add('bg-green-100', 'text-green-800');
                statusMessage.innerHTML = `
                    <p class="font-bold text-lg">Perfil da Empresa Salvo com Sucesso!</p>
                    <p class="mt-2 text-md">Perfil: ${profile}</p>
                    <p class="mt-2 text-md">Descrição: ${description}</p>
                    <button onclick="window.location.href = 'index.html';" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 mt-4">Voltar ao Início</button>
                `;
                form.classList.add('hidden');

            } catch (e) {
                console.error("Erro ao salvar o resultado: ", e);
                statusMessage.classList.remove('hidden');
                statusMessage.classList.add('bg-red-100', 'text-red-800');
                statusMessage.innerHTML = `<p class="font-bold text-lg">Houve um erro ao salvar os dados. Por favor, tente novamente.</p>`;
                submitButton.disabled = false;
                submitButton.classList.remove('bg-gray-400', 'cursor-not-allowed');
                submitButton.classList.add('bg-blue-600', 'hover:bg-blue-700');
            }
        };
    </script>
</body>
</html>
